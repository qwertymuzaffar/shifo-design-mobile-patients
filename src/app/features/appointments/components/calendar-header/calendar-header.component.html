<div class="p-3 flex items-center justify-between">
  <div class="flex items-center space-x-4">
    <div class="flex items-center min-w-52">
      <h2 class="text-xl font-semibold text-gray-900 capitalize">
        {{ calendarTitle() }}
      </h2>
    </div>

    <div class="flex items-center space-x-1">
      <button
        (click)="navigate.emit('prev')"
        class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
      >
        <lucide-icon
          [name]="ChevronLeft"
          [size]="20"
          class="text-gray-600"
        ></lucide-icon>
      </button>
      <button
        (click)="navigate.emit('next')"
        class="p-2 hover:bg-gray-100 rounded-lg transition-colors"
      >
        <lucide-icon
          [name]="ChevronRight"
          [size]="20"
          class="text-gray-600"
        ></lucide-icon>
      </button>
    </div>

    <button
      (click)="setCurrentDate.emit()"
      class="px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors"
    >
      {{ 'calendar-header.today' | transloco }}
    </button>

    <div class="flex bg-gray-100 rounded-lg p-1">
      <button
        (click)="setViewMode.emit('day')"
        class="px-3 py-1 text-sm rounded-md transition-colors"
        [ngClass]="{
          'bg-white text-gray-900 shadow-sm': viewMode() === 'day',
          'text-gray-600 hover:text-gray-900': viewMode() !== 'day'
        }"
      >
        {{ 'calendar-header.day' | transloco }}
      </button>
      <button
        (click)="setViewMode.emit('week')"
        class="px-3 py-1 text-sm rounded-md transition-colors"
        [ngClass]="{
          'bg-white text-gray-900 shadow-sm': viewMode() === 'week',
          'text-gray-600 hover:text-gray-900': viewMode() !== 'week'
        }"
      >
        {{ 'calendar-header.week' | transloco }}
      </button>
    </div>
  </div>

  <div class="hidden lg:flex items-center space-x-2">
    <app-form-field [control]="patientControl">
      <div class="flex items-center relative">
        <input
          class="!w-72 !py-2 !rounded"
          [placeholder]="'calendar-header.patient' | transloco"
          type="text"
          [formControl]="patientControl"
          [matAutocomplete]="auto"
        />
        @if (patientControl.value) {
          <lucide-icon
            (click)="clearFilterByKey(filterKey.PATIENT_ID)"
            [img]="X"
            class="absolute right-1 top-1/2 -translate-y-1/2 cursor-pointer text-gray-400 w-5 h-5"
          ></lucide-icon>
        }
      </div>

      <mat-autocomplete
        #auto="matAutocomplete"
        optionsScroll
        (optionsScroll)="loaderPatients()"
      >
        @for (patient of patientDataPagination().items; track patient) {
          <mat-option
            (click)="selectEvent(filterKey.PATIENT_ID, patient.id)"
            [value]="patient.fullName"
          >
            {{ patient.fullName }}
          </mat-option>
        }
      </mat-autocomplete>
    </app-form-field>

    <app-doctor-multi-select
      [doctors]="doctors()"
      [formControl]="doctorControl"
    />

    <button
      (click)="clearFilter()"
      class="p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"
      [title]="'calendar-header.clear_filter' | transloco"
    >
      <lucide-icon [img]="X" [size]="20"></lucide-icon>
    </button>
  </div>
</div>
